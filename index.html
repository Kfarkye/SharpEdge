<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

    <title>SharpEdge NHL | Advanced Hockey Analytics</title>
    <meta name="description" content="Precision NHL analytics, real-time data visualization, and predictive modeling. Engineered for performance and clarity.">

    <meta name="color-scheme" content="dark light"> <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f9fafb" />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000000" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://aistudiocdn.com">

    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=JetBrains+Mono:wght@400;500;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet"></noscript>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      // Stripe-Grade UX: Immediate theme detection to prevent FOUC (Flash Of Unstyled Content).
      (function() {
        try {
          const storedTheme = localStorage.getItem('appTheme');
          // Determine the effective theme: prioritize storage, fallback to OS preference.
          if (storedTheme === 'light' || (!storedTheme && window.matchMedia('(prefers-color-scheme: light)').matches)) {
            document.documentElement.classList.remove('dark');
            document.documentElement.classList.add('light');
          }
        } catch (e) {
          // Observability & Resilience: Handle cases where localStorage is inaccessible.
          console.warn("Observability [Theme Init]: LocalStorage inaccessible. Falling back to system preference.");
        }
      })();
    </script>

    <script>
      tailwind.config = {
        darkMode: 'class',
        // Accessibility (Stripe-grade UX): Implement robust, global focus states using a plugin.
        plugins: [
          function({ addBase, theme }) {
            addBase({
              // Ensures all interactive elements have a clear, consistent focus ring when navigated via keyboard (WCAG AA).
              '*:focus-visible': {
                outline: 'none',
                // Uses the accent color defined in the theme system, creating a clear focus indicator
                boxShadow: `0 0 0 2px rgb(var(--background)), 0 0 0 4px rgb(var(--accent-bg) / 0.8)`,
                borderRadius: theme('borderRadius.DEFAULT', '0.25rem'),
              },
            });
          },
        ],
        theme: {
          // Typography Scale (Jony Ive Polish): Defined for clarity, hierarchy, and density.
          fontSize: {
            'xs':   ['0.75rem', { lineHeight: '1rem', letterSpacing: '-0.01em' }],   // 12px
            'sm':   ['0.875rem', { lineHeight: '1.25rem', letterSpacing: '-0.015em' }], // 14px
            'base': ['1rem', { lineHeight: '1.5rem', letterSpacing: '-0.02em' }],    // 16px
            'lg':   ['1.125rem', { lineHeight: '1.75rem', letterSpacing: '-0.025em' }], // 18px
            'xl':   ['1.25rem', { lineHeight: '1.75rem', letterSpacing: '-0.03em' }],  // 20px
            '2xl':  ['1.5rem', { lineHeight: '2rem', letterSpacing: '-0.035em' }],   // 24px
            '3xl':  ['1.875rem', { lineHeight: '2.25rem', letterSpacing: '-0.04em' }], // 30px
          },
          // Information Density (DraftKings style): Tighter spacing scale.
          spacing: {
            '0': '0px',
            'px': '1px',
            '0.5': '0.125rem', // 2px
            '1': '0.25rem',   // 4px
            '1.5': '0.375rem', // 6px
            '2': '0.5rem',    // 8px
            '2.5': '0.625rem', // 10px
            '3': '0.75rem',   // 12px
            '4': '1rem',      // 16px
            '5': '1.25rem',   // 20px
            '6': '1.5rem',    // 24px
            '8': '2rem',      // 32px
            '10': '2.5rem',
            '12': '3rem',
            '16': '4rem',
          },
          extend: {
            fontFamily: {
              // Inter (Variable) for UI, with comprehensive system fallbacks.
              sans: ['Inter', 'ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', 'sans-serif'],
              // JetBrains Mono for data visualization and code (Data Clarity).
              mono: ['"JetBrains Mono"', 'ui-monospace', 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
            },
            // Consolidated Color System using CSS Variables (Stripe/Vercel structure)
            colors: {
              transparent: 'transparent',
              current: 'currentColor',
              background: 'rgb(var(--background) / <alpha-value>)',
              // Semantic grouping for panels (surfaces)
              surface: {
                DEFAULT: 'rgb(var(--surface-bg) / <alpha-value>)',
                highlight: 'rgb(var(--surface-highlight) / <alpha-value>)',
                border: 'rgb(var(--surface-border) / <alpha-value>)',
              },
              // Semantic grouping for text
              text: {
                primary: 'rgb(var(--text-primary) / <alpha-value>)',
                secondary: 'rgb(var(--text-secondary) / <alpha-value>)',
                tertiary: 'rgb(var(--text-tertiary) / <alpha-value>)',
              },
              // Refined Accent System
              accent: {
                DEFAULT: 'rgb(var(--accent-bg) / <alpha-value>)',
                foreground: 'rgb(var(--accent-fg) / <alpha-value>)',
                hover: 'rgb(var(--accent-hover) / <alpha-value>)',
              },
              // Status colors
              success: 'rgb(var(--success) / <alpha-value>)',
              danger: 'rgb(var(--danger) / <alpha-value>)',
            },
            // Depth and Effects (Vercel/Stripe Polish)
            boxShadow: {
              // Subtle elevation for UI elements
              'subtle': '0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)',
              // Deep shadow for modals/dialogs
              'xl-deep': '0 20px 40px -12px rgba(0, 0, 0, 0.35)',
               // Subtle glow effect (optimized for accent color)
              'glow': '0 0 60px -15px rgba(var(--accent-bg), 0.4)',
            },
            // High-fidelity animations with custom easing curves (iOS-like feel).
            animation: {
              'enter': 'fadeIn 0.5s cubic-bezier(0.16, 1, 0.3, 1)',
              'pulse-subtle': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            },
            keyframes: {
              fadeIn: {
                 // Performance hint: 'will-change' informs the browser to optimize these properties.
                '0%': { opacity: '0', transform: 'translateY(10px) scale(0.99)', 'will-change': 'transform, opacity' },
                '100%': { opacity: '1', transform: 'translateY(0) scale(1)' },
              },
            },
            borderRadius: {
                DEFAULT: '0.375rem', // 6px default radius
                lg: '0.75rem', // 12px for larger panels
            }
          }
        },
        variants: {
          // Accessibility: Ensure animations respect user preferences.
          animation: ['responsive', 'motion-safe', 'motion-reduce']
        }
      }
    </script>

    <style>
      /* ------------------------------------------------------------------ */
      /*  High-Fidelity Theming System (Inspired by Vercel, Linear, Stripe) */
      /*  Using RGB triplets for efficient opacity manipulation in Tailwind.*/
      /* ------------------------------------------------------------------ */
      :root {
        /* Light Mode (Stripe Inspired - Clean, Professional, Subtle Depth) */
        --background: 249 250 251;      /* Cool, light gray background (#f9fafb) */
        
        --surface-bg: 255 255 255;        /* Pure white panels */
        --surface-highlight: 243 244 246; /* Subtle interaction state */
        --surface-border: 229 231 235;    /* Clear structural borders */

        --text-primary: 17 24 39;       /* Deep gray for maximum readability (A11y) */
        --text-secondary: 107 114 128;
        --text-tertiary: 156 163 175;

        /* Accent: A professional, accessible indigo (Stripe inspired) */
        --accent-bg: 99 102 241;        /* Indigo 500 */
        --accent-fg: 255 255 255;
        --accent-hover: 79 70 229;

        --success: 16 185 129;
        --danger: 239 68 68;
      }

      .dark {
        /* Dark Mode (Linear Inspired - Deep, Focused, Monochrome Elegance) */
        --background: 0 0 0;            /* True Black (OLED Optimized) */

        --surface-bg: 18 18 18;           /* Near black for subtle elevation */
        --surface-highlight: 38 38 38;  /* Interaction state */
        --surface-border: 51 51 51;       /* Subtle structural borders (#333) */

        --text-primary: 245 245 245;
        --text-secondary: 163 163 163;  /* #a3a3a3 */
        --text-tertiary: 115 115 115;

        /* Monochrome accent for premium feel (Linear style) */
        --accent-bg: 255 255 255;
        --accent-fg: 0 0 0;
        --accent-hover: 220 220 220;

        /* Brightened semantic colors for dark mode visibility */
        --success: 52 211 153;
        --danger: 248 113 113;
      }

      /* ------------------------------------------------------------------ */
      /*  Base Settings & Engineering Rigor                                 */
      /* ------------------------------------------------------------------ */

      /* CSS Reset Enhancement: Apply border defaults consistently */
      *, ::before, ::after {
        /* Dynamically apply border color based on the theme */
        border-color: rgb(var(--surface-border));
      }

      html, body {
        height: 100%;
        /* 'overflow: hidden' prevents document-level scroll, crucial for app-like layouts. Scrolling is managed within components. */
        overflow: hidden;
        /* 'touch-action: manipulation' optimizes responsiveness by disabling double-tap to zoom (Performance). */
        touch-action: manipulation;
        /* Prevents overscroll bounce/pull-to-refresh on mobile for a native feel. */
        overscroll-behavior: none;
        /* Prevents tap highlights on mobile (iOS Safari) */
        -webkit-tap-highlight-color: transparent;
      }
      
      /* Performance: Prevents layout shifts caused by scrollbar appearance/disappearance. */
      html {
        scrollbar-gutter: stable;
      }

      body {
        background-color: rgb(var(--background));
        color: rgb(var(--text-primary));
        /* Smooth, high-framerate transition between themes (iOS-like feel) */
        transition: background-color 0.5s cubic-bezier(0.16, 1, 0.3, 1);

        /* Jony Ive-level typography rendering settings */
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        /* Enabling advanced OpenType features in Inter (Kerning, Ligatures, specific glyphs for clarity) */
        font-feature-settings: "calt", "kern", "cv11", "ss01";
      }

      #root {
        height: 100%;
        display: flex;
        flex-direction: column;
        isolation: isolate; /* Creates a new stacking context for robust z-index management */
      }

      /* ------------------------------------------------------------------ */
      /*  Accessibility (A11y Standards)                                    */
      /* ------------------------------------------------------------------ */

      /* Reduced Motion Preference: Essential for users with vestibular disorders. */
      @media (prefers-reduced-motion: reduce) {
        *, ::before, ::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      }

      /* ------------------------------------------------------------------ */
      /*  Visual Polish (Material, Texture, and Depth)                      */
      /* ------------------------------------------------------------------ */

      /* 1. Subtle Noise Texture (Jony Ive Polish): Adds realism and depth. */
      .bg-effects::before {
        content: "";
        position: absolute;
        inset: 0;
        /* Placed behind content for safety */
        z-index: -1;
        opacity: 0.035; /* Extremely subtle */
        /* High-resolution, efficient inline SVG noise pattern */
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        pointer-events: none;
      }

      /* 2. Radial Gradient Background (Vercel Inspired Subtle Lighting) - Dark Mode Only */
      /* Adds depth and focus without being distracting. */
      .dark .bg-effects::after {
          content: '';
          position: absolute;
          inset: 0;
          z-index: -2; /* Behind the noise texture */
          /* A subtle radial gradient from the top center */
          background-image: radial-gradient(circle at top center, rgba(var(--surface-highlight), 0.3) 0%, rgba(0,0,0,0) 60%);
          pointer-events: none;
      }

      /* Refined Glassmorphism (iOS/macOS Style) */
      .glass-panel {
        background: rgba(var(--surface-bg), 0.7);
        /* High blur and saturation creates the vibrant, "frosted glass" effect */
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        /* Subtle inner border highlight */
        border: 1px solid rgba(var(--surface-border), 0.5);
        /* Performance hint for the compositor layer */
        will-change: backdrop-filter;
      }
      
      /* Interactive Glass Elements (Buttons/Inputs) */
      .glass-button {
        background: rgba(var(--surface-highlight), 0.4);
        border: 1px solid rgba(var(--surface-border), 0.3);
        backdrop-filter: blur(15px);
        /* Snappy interaction feedback */
        transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      }
      .glass-button:hover {
        background: rgba(var(--surface-highlight), 0.7);
        transform: translateY(-1px); /* Subtle lift */
      }
      .glass-button:active {
        transform: translateY(0px) scale(0.98); /* Tactile press feedback */
        transition-duration: 0.1s;
      }

      /* ------------------------------------------------------------------ */
      /*  Utilities & Component Styles                                      */
      /* ------------------------------------------------------------------ */

      /* Ultra-thin, unobtrusive scrollbar (macOS/Linear aesthetic) */
      ::-webkit-scrollbar { width: 6px; height: 6px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb {
        background: rgba(var(--text-tertiary), 0.3);
        border-radius: 6px;
      }
      ::-webkit-scrollbar-thumb:hover { background: rgba(var(--text-secondary), 0.5); }

      /* Utility for hiding scrollbars on internal containers */
      .scrollbar-hide::-webkit-scrollbar { display: none; }
      .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

      /* Typography for Data Visualization (DraftKings density/clarity) */
      .font-numeric {
        font-variant-numeric: tabular-nums;
        letter-spacing: 0;
      }
    </style>

    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://aistudiocdn.com/@google/genai@^1.30.0",
        "react-dom/client": "https://aistudiocdn.com/react-dom@18.2.0/client.js",
        "react-dom/": "https://aistudiocdn.com/react-dom@18.2.0/",
        "react": "https://aistudiocdn.com/react@18.2.0/index.js",
        "react/jsx-runtime": "https://aistudiocdn.com/react@18.2.0/jsx-runtime.js",
        "react/": "https://aistudiocdn.com/react@18.2.0/",
        "lucide-react": "https://aistudiocdn.com/lucide-react@0.294.0"
      }
    }
    </script>
  </head>

  <body class="font-sans bg-effects">
    
    <noscript>
        <style>
            body { overflow: auto !important; }
            #no-js-message { display: flex; justify-content: center; align-items: center; height: 100vh; padding: 20px; text-align: center; }
            #root { display: none; }
        </style>
        <div id="no-js-message">
            <div>
                <h1 class="text-2xl font-semibold mb-4">JavaScript Required</h1>
                <p class="text-text-secondary">SharpEdge NHL is a high-performance analytics platform that requires JavaScript. Please enable it in your browser settings.</p>
            </div>
        </div>
    </noscript>

    <div id="root">
      <div class="flex items-center justify-center h-screen" role="status" aria-live="polite" aria-label="Loading SharpEdge NHL application">
        <svg class="animate-spin h-8 w-8 text-accent" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
      </div>
    </div>

    <script type="module" src="/index.tsx"></script>

    <script>
      // Centralized logging for uncaught exceptions and promise rejections.
      window.addEventListener('error', (event) => {
        console.error("Observability Hook [Global Error]:", {
            message: event.message,
            filename: event.filename,
            lineno: event.lineno,
            error: event.error,
        });
        // Production systems should hook into a logging service here (e.g., Sentry, Datadog).
      });
      window.addEventListener('unhandledrejection', (event) => {
        console.error("Observability Hook [Promise Rejection]:", event.reason);
      });
    </script>
  </body>
</html>